<!-- Toggleable Scenes Panel (Right Overlay) -->
<div class="h-full w-full bg-slate-800/90 backdrop-blur-md rounded-2xl shadow-2xl border border-white/10 flex flex-col overflow-hidden">
    
    <!-- Header -->
    <div class="p-3 border-b border-white/10 flex items-center justify-between">
        <span class="text-xs font-bold text-white uppercase tracking-wider">Escenas</span>
        <button (click)="togglePlayback()" 
            class="w-10 h-10 rounded-full text-white flex items-center justify-center shadow-lg transition-all hover:scale-105"
            [class.bg-gradient-to-r]="!isPlaying"
            [class.from-blue-600]="!isPlaying"
            [class.to-indigo-600]="!isPlaying"
            [class.bg-red-500]="isPlaying"
            title="{{isPlaying ? 'Detener' : 'Reproducir'}}">
            <!-- Play Icon -->
            <svg *ngIf="!isPlaying" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                <path fill-rule="evenodd" d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z" clip-rule="evenodd" />
            </svg>
            <!-- Pause Icon -->
            <svg *ngIf="isPlaying" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                <path fill-rule="evenodd" d="M6.75 5.25a.75.75 0 01.75-.75H9a.75.75 0 01.75.75v13.5a.75.75 0 01-.75.75H7.5a.75.75 0 01-.75-.75V5.25zm7.5 0A.75.75 0 0115 4.5h1.5a.75.75 0 01.75.75v13.5a.75.75 0 01-.75.75H15a.75.75 0 01-.75-.75V5.25z" clip-rule="evenodd" />
            </svg>
        </button>
    </div>

    <!-- Slides List -->
    <div class="flex-1 overflow-y-auto p-2 space-y-2 custom-scrollbar">
        <div *ngFor="let slide of slides$ | async; let i = index" 
            class="group relative aspect-video w-full bg-slate-700/50 rounded-lg cursor-pointer border-2 border-transparent hover:border-blue-500/50 transition-all overflow-hidden"
            (click)="loadSlide(slide, i)">
            
            <div class="w-full h-full flex items-center justify-center">
                <span class="text-[10px] text-gray-500 font-mono">FRAME {{i + 1}}</span>
            </div>
            
            <!-- Hover Play -->
            <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path fill-rule="evenodd" d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z" clip-rule="evenodd" />
                </svg>
            </div>
            
            <span class="absolute bottom-1 left-1 text-[9px] font-bold text-white bg-black/50 px-1 rounded">#{{i + 1}}</span>
        </div>
    </div>

    <!-- Add Button -->
    <div class="p-2 border-t border-white/10">
        <button (click)="addSlide()" class="w-full py-2 rounded-lg border-2 border-dashed border-white/20 text-gray-400 hover:text-blue-400 hover:border-blue-400/50 hover:bg-blue-500/10 transition-all flex items-center justify-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
            <span class="text-[10px] font-bold uppercase">Nueva</span>
        </button>
    </div>

</div>
