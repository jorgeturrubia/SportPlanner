<aside
    class="h-full flex flex-col bg-dark-surface border-r-2 border-dark-border transition-all duration-300 overflow-hidden"
    [class.w-64]="!collapsed" [class.w-20]="collapsed">
    <!-- Logo Area -->
    <div class="h-16 flex items-center justify-center border-b-2 border-dark-border shrink-0">
        <div class="font-black text-primary text-xl tracking-tighter truncate px-4">
            <span *ngIf="!collapsed">SPORTPLANNER</span>
            <span *ngIf="collapsed">SP</span>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 py-6 px-2 space-y-2 overflow-y-auto">
        <a routerLink="/dashboard" routerLinkActive="bg-primary text-black border-primary"
            [routerLinkActiveOptions]="{exact: true}"
            class="flex items-center px-4 py-3 rounded-none border-2 border-transparent text-gray-400 hover:text-white hover:border-dark-border transition-all group cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                <polyline points="9 22 9 12 15 12 15 22" />
            </svg>
            <span class="ml-3 font-bold tracking-wide truncate transition-opacity duration-300"
                [class.opacity-0]="collapsed" [class.w-0]="collapsed" [class.hidden]="collapsed">
                {{ 'SIDEBAR.HOME' | translate }}
            </span>
        </a>

        <a routerLink="/dashboard/teams" routerLinkActive="bg-primary text-black border-primary"
            class="flex items-center px-4 py-3 rounded-none border-2 border-transparent text-gray-400 hover:text-white hover:border-dark-border transition-all group cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
            </svg>
            <span class="ml-3 font-bold tracking-wide truncate transition-opacity duration-300"
                [class.opacity-0]="collapsed" [class.w-0]="collapsed" [class.hidden]="collapsed">
                {{ 'SIDEBAR.MY_TEAMS' | translate }}
            </span>
        </a>

        <a routerLink="/dashboard/plannings" routerLinkActive="bg-primary text-black border-primary"
            class="flex items-center px-4 py-3 rounded-none border-2 border-transparent text-gray-400 hover:text-white hover:border-dark-border transition-all group cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            <span class="ml-3 font-bold tracking-wide truncate transition-opacity duration-300"
                [class.opacity-0]="collapsed" [class.w-0]="collapsed" [class.hidden]="collapsed">
                {{ 'SIDEBAR.PLANNINGS' | translate }}
            </span>
        </a>

        <!-- Master User Menu -->
        <div class="space-y-1">
            <button (click)="toggleMasterUser()"
                class="w-full flex items-center justify-between px-4 py-3 rounded-none border-2 border-transparent text-gray-400 hover:text-white hover:border-dark-border transition-all group cursor-pointer">
                <div class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="shrink-0">
                        <path d="M12 2a3 3 0 0 0-3 3v4a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                        <line x1="12" x2="12" y1="19" y2="22"></line>
                    </svg>
                    <span class="ml-3 font-bold tracking-wide truncate transition-opacity duration-300"
                        [class.opacity-0]="collapsed" [class.w-0]="collapsed" [class.hidden]="collapsed">
                        {{ 'SIDEBAR.MASTER_USER' | translate }}
                    </span>
                </div>
                <svg *ngIf="!collapsed" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="transition-transform duration-300" [class.rotate-180]="masterUserExpanded()">
                    <polyline points="6 9 12 15 18 9" />
                </svg>
            </button>

            <!-- Submenu -->
            <div *ngIf="masterUserExpanded() && !collapsed"
                class="ml-6 space-y-1 overflow-hidden transition-all duration-300">
                <a routerLink="/dashboard/master-user/sport-concepts"
                    routerLinkActive="bg-secondary text-black border-secondary"
                    class="flex items-center px-4 py-2 rounded-none border-2 border-transparent text-gray-400 hover:text-white hover:border-dark-border transition-all group cursor-pointer text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="shrink-0">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
                    </svg>
                    <span class="ml-3 font-bold tracking-wide truncate">
                        {{ 'SIDEBAR.SPORT_CONCEPTS' | translate }}
                    </span>
                </a>
                <a routerLink="/dashboard/master-user/concept-categories"
                    routerLinkActive="bg-secondary text-black border-secondary"
                    class="flex items-center px-4 py-2 rounded-none border-2 border-transparent text-gray-400 hover:text-white hover:border-dark-border transition-all group cursor-pointer text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="shrink-0">
                        <path d="M3 3v18h18" />
                        <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3" />
                    </svg>
                    <span class="ml-3 font-bold tracking-wide truncate">
                        {{ 'SIDEBAR.CATEGORIES' | translate }}
                    </span>
                </a>
            </div>
        </div>

        <!-- CoreMasters Menu -->
        <div class="space-y-1">
            <button (click)="toggleCoreMasters()"
                class="w-full flex items-center justify-between px-4 py-3 rounded-none border-2 border-transparent text-gray-400 hover:text-white hover:border-dark-border transition-all group cursor-pointer">
                <div class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="shrink-0">
                        <path
                            d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" />
                        <circle cx="12" cy="12" r="3" />
                    </svg>
                    <span class="ml-3 font-bold tracking-wide truncate transition-opacity duration-300"
                        [class.opacity-0]="collapsed" [class.w-0]="collapsed" [class.hidden]="collapsed">
                        {{ 'SIDEBAR.CORE_MASTERS' | translate }}
                    </span>
                </div>
                <svg *ngIf="!collapsed" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="transition-transform duration-300" [class.rotate-180]="coreMastersExpanded()">
                    <polyline points="6 9 12 15 18 9" />
                </svg>
            </button>

            <!-- Submenu -->
            <div *ngIf="coreMastersExpanded() && !collapsed"
                class="ml-6 space-y-1 overflow-hidden transition-all duration-300">
                <a routerLink="/dashboard/core-masters/subscription-sports"
                    routerLinkActive="bg-secondary text-black border-secondary"
                    class="flex items-center px-4 py-2 rounded-none border-2 border-transparent text-gray-400 hover:text-white hover:border-dark-border transition-all group cursor-pointer text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="shrink-0">
                        <circle cx="12" cy="12" r="10" />
                        <path d="M12 16v-4" />
                        <path d="M12 8h.01" />
                    </svg>
                    <span class="ml-3 font-bold tracking-wide truncate">
                        {{ 'SIDEBAR.SUBSCRIPTION_SPORTS' | translate }}
                    </span>
                </a>
            </div>
        </div>
    </nav>

    <!-- User Profile -->
    <div class="p-4 border-t-2 border-dark-border bg-dark-bg shrink-0">
        <!-- Language Switcher -->
        <div class="flex justify-center gap-2 text-xs font-bold text-gray-400 mb-3" *ngIf="!collapsed">
            <button (click)="switchLanguage('es')" [class.text-primary]="currentLang() === 'es'"
                class="hover:text-white transition-colors">ES</button>
            <span>|</span>
            <button (click)="switchLanguage('en')" [class.text-primary]="currentLang() === 'en'"
                class="hover:text-white transition-colors">EN</button>
        </div>

        <div class="flex items-center justify-between overflow-hidden">
            <div class="flex items-center overflow-hidden flex-1">
                <div
                    class="w-10 h-10 rounded-full bg-secondary flex items-center justify-center text-black font-bold shrink-0 border-2 border-white">
                    {{ userName().charAt(0).toUpperCase() }}
                </div>
                <div class="ml-3 overflow-hidden transition-all duration-300" [class.opacity-0]="collapsed"
                    [class.w-0]="collapsed">
                    <p class="text-sm font-bold text-white truncate">{{ userName() }}</p>
                    <p class="text-xs text-gray-500 truncate">{{ userEmail() }}</p>
                </div>
            </div>
            <button (click)="logout()"
                class="shrink-0 p-2 border-2 border-transparent hover:border-danger hover:text-danger text-gray-400 transition-all group"
                [class.ml-2]="!collapsed" [title]="'SIDEBAR.LOGOUT' | translate">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                    <polyline points="16 17 21 12 16 7" />
                    <line x1="21" y1="12" x2="9" y2="12" />
                </svg>
            </button>
        </div>
    </div>
</aside>