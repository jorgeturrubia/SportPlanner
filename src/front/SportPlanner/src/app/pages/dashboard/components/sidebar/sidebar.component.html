<div [class]="'flex flex-col h-full bg-card shadow-lg transition-all duration-300 ease-in-out ' + (isCollapsed() ? 'w-20' : 'w-64')">
  <!-- Logo/Brand Section -->
  <div class="flex items-center justify-between px-6 py-8 border-b border-border">
    <div class="flex items-center space-x-3">
      <div class="w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center">
        <ng-icon name="heroAcademicCap" class="w-5 h-5 text-white" />
      </div>
      @if (!isCollapsed()) {
        <h1 class="text-xl font-bold text-foreground transition-opacity duration-300">SportPlanner</h1>
      }
    </div>
    <!-- Toggle Button -->
    <button
      (click)="onToggleSidebar()"
      class="p-2 rounded-lg hover:bg-secondary/50 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 cursor-pointer"
      [title]="isCollapsed() ? 'Expandir sidebar' : 'Contraer sidebar'"
      type="button"
    >
      @if (isCollapsed()) {
        <ng-icon name="heroChevronRight" class="w-4 h-4 text-muted-foreground" />
      } @else {
        <ng-icon name="heroChevronLeft" class="w-4 h-4 text-muted-foreground" />
      }
    </button>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 px-4 py-6 space-y-2">
    @for (item of navigationItems; track item.path) {
      <a
        [routerLink]="item.path"
        routerLinkActive="bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300"
        [class]="'flex items-center text-foreground rounded-lg hover:bg-secondary/50 transition-colors duration-200 group cursor-pointer ' + (isCollapsed() ? 'px-4 py-3 justify-center' : 'px-4 py-3')"
        [title]="isCollapsed() ? item.label : ''"
      >
        <ng-icon 
          [name]="item.icon" 
          [class]="'w-5 h-5 group-hover:text-green-600 dark:group-hover:text-green-400 ' + (isCollapsed() ? '' : 'mr-3')" 
        />
        @if (!isCollapsed()) {
          <span class="font-medium transition-opacity duration-300">{{ item.label }}</span>
        }
      </a>
    }
  </nav>

  <!-- Separator -->
  <div class="px-4">
    <div class="border-t border-border"></div>
  </div>

  <!-- User Profile Section -->
  @if (isAuthenticated() && currentUser()) {
    <div class="px-4 py-6 border-t border-border">
      @if (isCollapsed()) {
        <!-- Collapsed User Profile -->
        <div class="flex flex-col items-center space-y-4">
          <div 
            class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white font-semibold text-sm cursor-pointer hover:bg-green-700 transition-colors duration-200"
            [title]="userDisplayName() + ' (' + userRole() + ')'"
          >
            {{ userInitials() }}
          </div>
          
          <!-- Logout Button -->
          <button
            (click)="onLogout()"
            class="p-2 text-foreground rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 transition-colors duration-200 group cursor-pointer"
            title="Cerrar Sesión"
          >
            <ng-icon 
              name="heroArrowRightOnRectangle" 
              class="w-4 h-4 group-hover:text-red-600 dark:group-hover:text-red-400" 
            />
          </button>
        </div>
      } @else {
        <!-- Expanded User Profile -->
        <div class="flex items-center space-x-3 mb-4">
          <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">
            {{ userInitials() }}
          </div>
          <div class="flex-1 min-w-0">
            <p class="text-sm font-semibold text-foreground truncate">
              {{ userDisplayName() }}
            </p>
            <p class="text-xs text-muted-foreground">
              {{ userRole() }}
            </p>
          </div>
        </div>
        
        <!-- Logout Button -->
        <button
          (click)="onLogout()"
          class="flex items-center w-full px-4 py-2 text-sm text-foreground rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 transition-colors duration-200 group cursor-pointer"
        >
          <ng-icon 
            name="heroArrowRightOnRectangle" 
            class="w-4 h-4 mr-3 group-hover:text-red-600 dark:group-hover:text-red-400" 
          />
          <span class="font-medium">Cerrar Sesión</span>
        </button>
      }
    </div>
  }
</div>